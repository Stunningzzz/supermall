(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-615cf391"],{"0d9a":function(t,e,n){},"1e48":function(t,e,n){"use strict";n("0d9a")},"23c3":function(t,e,n){},"3ca3":function(t,e,n){"use strict";var a=n("6547").charAt,o=n("69f3"),i=n("7dd0"),r="String Iterator",s=o.set,c=o.getterFor(r);i(String,"String",(function(t){s(this,{type:r,string:String(t),index:0})}),(function(){var t,e=c(this),n=e.string,o=e.index;return o>=n.length?{value:void 0,done:!0}:(t=a(n,o),e.index+=t.length,{value:t,done:!1})}))},"4df4":function(t,e,n){"use strict";var a=n("0366"),o=n("7b0b"),i=n("9bdd"),r=n("e95a"),s=n("50c4"),c=n("8418"),l=n("35a1");t.exports=function(t){var e,n,u,f,d,b,h=o(t),p="function"==typeof this?this:Array,m=arguments.length,v=m>1?arguments[1]:void 0,g=void 0!==v,C=l(h),y=0;if(g&&(v=a(v,m>2?arguments[2]:void 0,2)),void 0==C||p==Array&&r(C))for(e=s(h.length),n=new p(e);e>y;y++)b=g?v(h[y],y):h[y],c(n,y,b);else for(f=C.call(h),d=f.next,n=new p;!(u=d.call(f)).done;y++)b=g?i(f,v,[u.value,y],!0):u.value,c(n,y,b);return n.length=y,n}},"6f1e":function(t,e,n){"use strict";n("d95f")},"7f9e":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tab-control"},t._l(t.titles,(function(e,a){return n("div",{on:{click:function(e){return t.itemClick(a)}}},[n("span",{staticClass:"tab-items",class:{active:a===t.currentIndex}},[t._v(" "+t._s(e)+" ")])])})),0)},o=[],i={name:"TabControl",props:{titles:{type:Array,default:function(){return[]}},disabled:!1},data:function(){return{currentIndex:0}},methods:{itemClick:function(t){this.disabled||(this.currentIndex=t,this.$emit("tabClick",t))}}},r=i,s=(n("9f9d"),n("0c7c")),c=Object(s["a"])(r,a,o,!1,null,"25d48ae8",null);e["a"]=c.exports},"7fc5":function(t,e,n){},"81d5":function(t,e,n){"use strict";var a=n("7b0b"),o=n("23cb"),i=n("50c4");t.exports=function(t){var e=a(this),n=i(e.length),r=arguments.length,s=o(r>1?arguments[1]:void 0,n),c=r>2?arguments[2]:void 0,l=void 0===c?n:o(c,n);while(l>s)e[s++]=t;return e}},"8d88":function(t,e,n){"use strict";n("23c3")},"9bdd":function(t,e,n){var a=n("825a"),o=n("2a62");t.exports=function(t,e,n,i){try{return i?e(a(n)[0],n[1]):e(n)}catch(r){throw o(t),r}}},"9f9d":function(t,e,n){"use strict";n("7fc5")},a630:function(t,e,n){var a=n("23e7"),o=n("4df4"),i=n("1c7e"),r=!i((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:r},{from:o})},adaa:function(t,e,n){"use strict";n("f563")},bb51:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"category"}},[n("cate-top"),n("div",{staticClass:"cate-tab-content"},[n("cate-tabs",{staticClass:"cate-tabs",attrs:{tabs:t.tabs,tabIndex:t.tabIndex},on:{tabClick:t.tabClick}}),n("tab-control",{directives:[{name:"show",rawName:"v-show",value:t.isShowPH,expression:"isShowPH"}],ref:"tabControl1",staticClass:"placeHolder",attrs:{titles:["综合","新款","销量"]},on:{tabClick:t.contentClick}}),n("scroll",{ref:"scroll",staticClass:"cate-content",on:{scroll:t.scroll,refresh:t.refresh}},[n("cate-content-list",{attrs:{content:t.curContent}}),n("tab-control",{ref:"tabControl2",attrs:{titles:["综合","新款","销量"]},on:{tabClick:t.contentClick}}),n("good-list",{attrs:{goods:t.goods}})],1)],1)],1)},o=[],i=(n("cb29"),n("a630"),n("3ca3"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("top-nav-bar",{staticClass:"cate-top"},[n("div",{attrs:{slot:"center"},slot:"center"},[t._v(" 分类 ")])])}),r=[],s=n("ccc0"),c={name:"CateTop",components:{TopNavBar:s["a"]}},l=c,u=(n("1e48"),n("0c7c")),f=Object(u["a"])(l,i,r,!1,null,"9f7af6da",null),d=f.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("scroll",{ref:"scroll"},t._l(t.tabs,(function(e,a){return n("div",{key:e.maitKey,staticClass:"tab-item",class:{active:a===t.tabIndex},on:{click:function(e){return t.tabClick(a)}}},[t._v(" "+t._s(e.title)+" ")])})),0)},h=[],p=n("5d17"),m={components:{Scroll:p["a"]},name:"CateTabs",props:{tabs:Array,tabIndex:0},methods:{tabClick:function(t){this.$emit("tabClick",t)}},updated:function(){var t=this;this.$nextTick((function(){t.$refs.scroll.refresh()}))},activated:function(){this.$refs.scroll.refresh()}},v=m,g=(n("8d88"),Object(u["a"])(v,b,h,!1,null,"6eebba03",null)),C=g.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-list"},t._l(t.content,(function(e){return n("a",{key:e.image,staticClass:"list-item",attrs:{href:e.link}},[n("img",{staticClass:"item-img",attrs:{src:e.image},on:{load:t.itemImgLoad}}),n("div",[t._v(" "+t._s(e.title)+" ")])])})),0)},x=[],k={name:"CateContentList",props:{content:Array},methods:{itemImgLoad:function(){this.$bus.$emit("itemImgLoad")}}},I=k,$=(n("6f1e"),Object(u["a"])(I,y,x,!1,null,"14ad0dd1",null)),w=$.exports,_=n("74bd"),T=n("c8f7"),A=n("7f9e"),L=function(){return{tabs:[],content:[],tabIndex:0,detail:[],detailType:"pop",imgLoadHandler:function(){},offsetTop:0,isShowPH:!1}},S=(n("4160"),n("d81d"),n("1bab"));function j(){return Object(S["a"])({url:"/category"})}function H(t){return console.log("maitKey ---- ",t),Object(S["a"])({url:"/subcategory",params:{maitKey:t}})}function O(t,e){return console.log("miniWallkey ---- ",t),console.log("type ---- ",e),Object(S["a"])({url:"/subcategory/detail",params:{miniWallkey:t,type:e}})}var E={getContent:function(){var t=this,e=this.tabs[this.tabIndex],n=e.maitKey,a=e.miniWallkey;H(n).then((function(e){t.$set(t.content,t.tabIndex,e.data.list)})),["pop","new","sell"].forEach((function(e){O(a,e).then((function(n){t.detail[t.tabIndex][e]=n.map((function(t){return t.price="¥"+t.price,t.coll=t.sale,t}))}))}))},tabClick:function(t){if(this.tabIndex!==t){var e=this.$refs,n=e.scroll,a=e.tabControl1,o=e.tabControl2;this.detailType="pop",a.currentIndex=0,o.currentIndex=0,this.tabIndex=t,this.content[t]||this.getContent(),n.scrollTo({x:0,y:0},0)}},scroll:function(t){console.log("滚了"),this.isShowPH=t.y<-this.offsetTop},refresh:function(){console.log("this.offsetTop ---- ",this.offsetTop),this.offsetTop=this.$refs.tabControl2.$el.offsetTop},contentClick:function(t){var e;switch(t){case 0:e="pop";break;case 1:e="new";break;case 2:e="sell";break}this.detailType=e;var n=this.$refs,a=n.tabControl1,o=n.tabControl2;a.currentIndex=t,o.currentIndex=t}},K=n("90b9"),P={name:"Category",components:{CateTop:d,CateTabs:C,CateContentList:w,Scroll:p["a"],GoodList:_["a"],ListItem:T["a"],TabControl:A["a"]},data:L,methods:E,computed:{goods:function(){var t=this.detail,e=this.tabIndex,n=this.detailType;return 0===t.length?[]:t[e][n]},curContent:function(){return this.content[this.tabIndex]}},created:function(){var t=this;j().then((function(e){t.tabs=e.data.category.list,t.content=Array(t.tabs.length).fill(null),t.detail=Array.from(Array(t.tabs.length),(function(){return{pop:[],new:[],sell:[]}})),t.getContent()}))},mounted:function(){var t=this.$refs.scroll,e=Object(K["b"])(50,t.refresh);t.onRefresh(),this.imgLoadHandler=function(){e("category")}},activated:function(){this.$refs.scroll.refresh(),this.$bus.$on("itemImgLoad",this.imgLoadHandler)},deactivated:function(){this.$bus.$off("itemImgLoad",this.imgLoadHandler)}},W=P,J=(n("adaa"),Object(u["a"])(W,a,o,!1,null,"72e0480a",null));e["default"]=J.exports},cb29:function(t,e,n){var a=n("23e7"),o=n("81d5"),i=n("44d2");a({target:"Array",proto:!0},{fill:o}),i("fill")},d81d:function(t,e,n){"use strict";var a=n("23e7"),o=n("b727").map,i=n("1dde"),r=n("ae40"),s=i("map"),c=r("map");a({target:"Array",proto:!0,forced:!s||!c},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},d95f:function(t,e,n){},f563:function(t,e,n){}}]);
//# sourceMappingURL=chunk-615cf391.37ce9b98.js.map